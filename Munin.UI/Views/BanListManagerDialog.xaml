<Window x:Class="Munin.UI.Views.BanListManagerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:Munin.UI.Localization"
        Title="{loc:Localize Key=BanListManager_Title}"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        ResizeMode="CanResize"
        Background="{DynamicResource BackgroundPrimaryBrush}"
        Width="650" Height="500"
        MinWidth="500" MinHeight="400"
        WindowStyle="None"
        AllowsTransparency="True">

    <Border BorderBrush="{DynamicResource BorderSubtleBrush}" 
            BorderThickness="1" 
            CornerRadius="8">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Grid.Row="0" 
                    Background="{DynamicResource BackgroundSecondaryBrush}"
                    CornerRadius="8,8,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <StackPanel Orientation="Horizontal" Margin="16,0">
                        <TextBlock x:Name="ChannelNameText"
                                   Text="#channel"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                        <TextBlock Text=" - "
                                   Foreground="{DynamicResource TextMutedBrush}"
                                   VerticalAlignment="Center"/>
                        <TextBlock Text="{loc:Localize Key=BanListManager_Title}"
                                   Foreground="{DynamicResource TextSecondaryBrush}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    <Button Content="âœ•" 
                            HorizontalAlignment="Right"
                            Width="40" Height="40"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="{DynamicResource TextMutedBrush}"
                            Click="CloseButton_Click"/>
                </Grid>
            </Border>

            <!-- Tab Selector -->
            <Border Grid.Row="1" Background="{DynamicResource BackgroundSecondaryBrush}">
                <StackPanel Orientation="Horizontal" Margin="16,8">
                    <RadioButton x:Name="TabBans" Content="{loc:Localize Key=BanListManager_Bans}"
                                 Style="{StaticResource TabRadioButtonStyle}"
                                 IsChecked="True"
                                 Checked="Tab_Changed"/>
                    <RadioButton x:Name="TabExceptions" Content="{loc:Localize Key=BanListManager_Exceptions}"
                                 Style="{StaticResource TabRadioButtonStyle}"
                                 Margin="16,0,0,0"
                                 Checked="Tab_Changed"/>
                    <RadioButton x:Name="TabInvites" Content="{loc:Localize Key=BanListManager_Invites}"
                                 Style="{StaticResource TabRadioButtonStyle}"
                                 Margin="16,0,0,0"
                                 Checked="Tab_Changed"/>
                </StackPanel>
            </Border>

            <!-- List View -->
            <Grid Grid.Row="2" Margin="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Add new entry -->
                <Grid Grid.Row="0" Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="NewMaskInput"
                             Grid.Column="0"
                             Background="{DynamicResource BackgroundSecondaryBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderSubtleBrush}"
                             Padding="12,8"
                             FontFamily="Consolas"
                             VerticalContentAlignment="Center"/>
                    <Button Grid.Column="1"
                            Content="{loc:Localize Key=BanListManager_Add}"
                            Margin="8,0,0,0"
                            Padding="16,8"
                            Background="{DynamicResource AccentBrush}"
                            Foreground="White"
                            BorderThickness="0"
                            Click="AddButton_Click"/>
                </Grid>

                <!-- List -->
                <ListView x:Name="EntryListView" 
                          Grid.Row="1"
                          Background="Transparent"
                          BorderThickness="0"
                          Foreground="{DynamicResource TextPrimaryBrush}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="{loc:Localize Key=BanListManager_Mask}" 
                                            Width="250"
                                            DisplayMemberBinding="{Binding Mask}"/>
                            <GridViewColumn Header="{loc:Localize Key=BanListManager_SetBy}" 
                                            Width="150"
                                            DisplayMemberBinding="{Binding SetBy}"/>
                            <GridViewColumn Header="{loc:Localize Key=BanListManager_SetAt}" 
                                            Width="150"
                                            DisplayMemberBinding="{Binding SetAtDisplay}"/>
                        </GridView>
                    </ListView.View>
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Padding" Value="8,4"/>
                            <Setter Property="ContextMenu">
                                <Setter.Value>
                                    <ContextMenu>
                                        <MenuItem Header="{loc:Localize Key=BanListManager_Remove}"
                                                  Click="RemoveButton_Click"/>
                                    </ContextMenu>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>

                <!-- Loading indicator -->
                <TextBlock x:Name="LoadingText"
                           Grid.Row="1"
                           Text="{loc:Localize Key=BanListManager_Loading}"
                           Foreground="{DynamicResource TextMutedBrush}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Visibility="Collapsed"/>

                <!-- Empty state -->
                <TextBlock x:Name="EmptyText"
                           Grid.Row="1"
                           Text="{loc:Localize Key=BanListManager_Empty}"
                           Foreground="{DynamicResource TextMutedBrush}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Visibility="Collapsed"/>
            </Grid>

            <!-- Footer -->
            <Border Grid.Row="3" 
                    Background="{DynamicResource BackgroundSecondaryBrush}"
                    Padding="16,12"
                    CornerRadius="0,0,8,8">
                <Grid>
                    <TextBlock x:Name="StatusText"
                               Foreground="{DynamicResource TextMutedBrush}"
                               VerticalAlignment="Center"/>
                    <Button Content="{loc:Localize Key=Dialog_Cancel}"
                            HorizontalAlignment="Right"
                            Width="80"
                            Padding="16,8"
                            Background="Transparent"
                            BorderBrush="{DynamicResource BorderSubtleBrush}"
                            Foreground="{DynamicResource TextPrimaryBrush}"
                            Click="CloseButton_Click"/>
                </Grid>
            </Border>
        </Grid>
    </Border>

    <Window.Resources>
        <Style x:Key="TabRadioButtonStyle" TargetType="RadioButton">
            <Setter Property="Foreground" Value="{DynamicResource TextMutedBrush}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                                <Setter TargetName="border" Property="Background" Value="{DynamicResource BackgroundHighlightBrush}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{DynamicResource BackgroundHighlightBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
</Window>
