<Window x:Class="Munin.UI.Views.ChannelListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:Munin.UI.Localization"
        Title="{loc:Localize Key=ChannelList_Title}"
        Height="500"
        Width="700"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundDarkBrush}"
        Foreground="{StaticResource TextPrimaryBrush}"
        FontFamily="{StaticResource MonospaceFont}"
        FontSize="13">

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="{loc:Localize Key=ChannelList_Title}" 
                       FontSize="18" 
                       FontWeight="SemiBold"/>
            <TextBlock x:Name="StatusText"
                       Text="{loc:Localize Key=ChannelList_Loading}" 
                       Foreground="{StaticResource TextMutedBrush}"
                       Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Search -->
        <Grid Grid.Row="1" Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBox Grid.Column="0" 
                     x:Name="SearchTextBox"
                     Padding="8,6"
                     TextChanged="SearchTextBox_TextChanged"/>
            <TextBlock Grid.Column="0" 
                       Text="{loc:Localize Key=MainWindow_Search}" 
                       Foreground="{StaticResource TextMutedBrush}"
                       Margin="12,0,0,0"
                       VerticalAlignment="Center"
                       IsHitTestVisible="False"
                       Visibility="{Binding Text.Length, ElementName=SearchTextBox, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=Invert}"/>
            
            <TextBlock Grid.Column="1" 
                       x:Name="CountText"
                       Text="0 channels"
                       Foreground="{StaticResource TextMutedBrush}"
                       VerticalAlignment="Center"
                       Margin="12,0,0,0"/>
        </Grid>

        <!-- Channel List -->
        <Border Grid.Row="2" 
                Background="{StaticResource BackgroundMediumBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="4">
            <ListView x:Name="ChannelListView"
                      Background="Transparent"
                      BorderThickness="0"
                      MouseDoubleClick="ChannelListView_MouseDoubleClick">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="{loc:Localize Key=ChannelList_Channel}" Width="200" DisplayMemberBinding="{Binding Name}"/>
                        <GridViewColumn Header="{loc:Localize Key=ChannelList_Users}" Width="70" DisplayMemberBinding="{Binding UserCount}"/>
                        <GridViewColumn Header="{loc:Localize Key=ChannelList_Topic}" Width="380" DisplayMemberBinding="{Binding Topic}"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="{loc:Localize Key=ChannelList_Refresh}" 
                    Click="RefreshButton_Click"
                    Width="100"
                    Margin="0,0,12,0"/>
            <Button Content="{loc:Localize Key=ChannelList_Join}" 
                    Click="JoinButton_Click"
                    Style="{StaticResource AccentButtonStyle}"
                    Width="100"
                    IsEnabled="{Binding SelectedItem, ElementName=ChannelListView, Converter={StaticResource NullToBoolConverter}}"/>
        </StackPanel>
    </Grid>
</Window>
